{% extends 'base.html.twig' %}

{% block title %}Modifier mon profil - Valmont{% endblock %}

{% block body %}
<body>
    <header class="hero">
        <h1>Modifier mon profil - Valmont</h1>
    </header>

    <main class="container-form">
        <section class="card-form">
            <h2 class="title-form">Modifiez vos informations</h2>

            {% for message in app.flashes('success') %}
                <div class="alert alert-success">
                    {{ message }}
                </div>
            {% endfor %}

            {% for message in app.flashes('error') %}
                <div class="alert alert-danger">
                    {{ message }}
                </div>
            {% endfor %}
                
            {{ form_start(form, {'attr': {'enctype': 'multipart/form-data'}}) }}
            <fieldset class="fieldset-form">

                <div class="form-group">
                    {{ form_label(form.login, 'Nom d\'utilisateur') }}
                    {{ form_widget(form.login, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.login) }}
                </div>

                {# Remplacer le bloc du mot de passe actuel par ceci #}
<div class="form-group">
    {{ form_label(form.mot_de_passe_actuel, 'Mot de passe actuel') }}
    {{ form_widget(form.mot_de_passe_actuel, {'attr': {'class': 'form-control', 'placeholder': 'Entrez votre mot de passe actuel'}}) }}
    {{ form_errors(form.mot_de_passe_actuel) }}
</div>

<div class="form-group">
    {{ form_label(form.nouveau_mot_de_passe, 'Nouveau mot de passe') }}
    {{ form_widget(form.nouveau_mot_de_passe, {'attr': {'class': 'form-control', 'placeholder': 'Laissez vide si vous ne souhaitez pas le modifier'}}) }}
    {{ form_errors(form.nouveau_mot_de_passe) }}
</div>


                <div class="form-group">
                    {{ form_label(form.nom, 'Nom') }}
                    {{ form_widget(form.nom, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.nom) }}
                </div>

                <div class="form-group">
                    {{ form_label(form.prenom, 'Prénom') }}
                    {{ form_widget(form.prenom, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.prenom) }}
                </div>

                <div class="form-group">
                    {{ form_label(form.email, 'Email') }}
                    {{ form_widget(form.email, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.email) }}
                </div>

                <div class="form-group">
                    {{ form_label(form.photo_url, 'Photo de profil') }}
                    {{ form_widget(form.photo_url, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.photo_url) }}
                </div>

                <div class="btn-form">
                    <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
                    <button type="reset" class="btn btn-secondary">Réinitialiser</button>
                </div>

            </fieldset>
            {{ form_end(form) }}
        </section>
    </main>

    <footer>
        <p>&copy; 2025 - Valmont | Ville connectée</p>
    </footer>

    <script src="{{ asset('search-panel.js') }}"></script>
</body>
{% endblock %}
